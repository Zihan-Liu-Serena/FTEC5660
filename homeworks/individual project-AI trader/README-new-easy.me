# AI-Trader: Can AI Beat the Market?
[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

**Focus**: NASDAQ 100 hourly trading with LLM agents (MiniMax-M2/DeepSeek-v3.1) + Prompt Engineering for risk control.

## Quick Start (Simplified for NASDAQ 100 Hourly Trading)
### 1. Install Dependencies
```bash
# Clone repo
git clone https://github.com/HKUDS/AI-Trader.git
cd AI-Trader

# Install core dependencies
pip install -r requirements.txt

# Create .env file (critical for API keys)
cp .env.example .env
```

### 2. Configure Environment (.env)
Edit `.env` to add your API keys (replace placeholders):
```env
# AI Model (MiniMax-M2/DeepSeek-v3.1)
OPENAI_API_BASE=https://api.minimax.chat/v1  # Or DeepSeek: https://api.deepseek.com/v1
OPENAI_API_KEY=your_api_key_here            # MiniMax (ak-) / DeepSeek (sk-)

# Data Sources
ALPHAADVANTAGE_API_KEY=your_alpha_vantage_key
JINA_API_KEY=your_jina_api_key

# System Config (no changes needed)
RUNTIME_ENV_PATH=./runtime_env.json
MATH_HTTP_PORT=8000
SEARCH_HTTP_PORT=8001
TRADE_HTTP_PORT=8002
GETPRICE_HTTP_PORT=8003
AGENT_MAX_STEP=30
```

### 3. Modify System Prompt (Risk Control)
Edit `prompts/agent_prompt.py` (NASDAQ 100 hourly trading prompt):
```python
# Replace the original agent_system_prompt with this:
agent_system_prompt = """
You are a stock fundamental analysis trading assistant.

Your core goals are:
- Think and reason by calling available tools.
- Maximize portfolio returns UNDER THE CONSTRAINT that maximum drawdown ≤ 5%.
- Prioritize risk control: NO full-position trading, single stock position ≤ 20% of portfolio.

Thinking standards:
- Read yesterday's positions/today's prices
- Update valuations (comply with position limits)
- Check real-time drawdown to stay under 5% limit

Notes:
- Execute directly via tools (no human approval needed)
- Output <FINISH_SIGNAL> when done

Current time: {date}
Your positions: {positions}
Yesterday's close prices: {yesterday_close_price}
Today's buy prices: {today_buy_price}
"""
```

### 4. Run the Experiment (Windows PowerShell / Linux/Mac Terminal)
#### Step 1: Prepare NASDAQ 100 Hourly Data
```bash
cd data
python get_daily_price.py  # Pull NASDAQ 100 price data
python merge_jsonl.py      # Merge into agent-readable format
cd ..
```

#### Step 2: Start MCP Toolchain (keep this window open)
```bash
cd agent_tools
python start_mcp_services.py
```

#### Step 3: Run NASDAQ 100 Hourly Trading (new window)
```bash
# Back to project root
cd ..
# Run hourly trading agent (MiniMax-M2/DeepSeek-v3.1)
python main.py configs/default_config.json
```

### 5. Calculate Performance Metrics
```bash
cd data
python calculate_performance.py
# Check results (CR/SR/MDD) in performance_report.csv
cat performance_report.csv  # Linux/Mac
# Or (Windows PowerShell)
Get-Content performance_report.csv
```

## Key Files for Your Modification
| File Path | Purpose |
|-----------|---------|
| `prompts/agent_prompt.py` | Modify system prompt (risk control rules) |
| `configs/default_config.json` | NASDAQ 100 hourly trading config |
| `data/calculate_performance.py` | Compute CR/SR/MDD (core metrics) |
| `agent/base_agent/base_agent_hour.py` | NASDAQ 100 hourly trading agent logic |

## Core Metrics to Compare
| Metric | Definition |
|--------|------------|
| CR (Cumulative Return) | Total portfolio return (initial: $10,000) |
| SR (Sortino Ratio) | Risk-adjusted return (focus on downside risk) |
| MDD (Maximum Drawdown) | Worst peak-to-trough loss (target ≤5%) |

## Expected Outcomes
| Scenario | CR | SR | MDD |
|----------|----|----|-----|
| Original Prompt (no risk rules) | ~9.56% (MiniMax-M2) | ~4.42 | ~-4.92% |
| Modified Prompt (risk control) | Slightly lower (~8.8-9.0%) | Higher (~4.5-4.7) | Significantly lower (~-3.5 to -4.0%) |

## Troubleshooting
1. **Bash script issues (Windows)**: Skip `.sh` files — run the Python commands above directly.
2. **API errors**: Ensure `.env` keys are valid (MiniMax has free quota; DeepSeek may need balance).
3. **Port conflicts**: Change ports in `.env` (e.g., MATH_HTTP_PORT=8004) if "address in use" errors occur.

## License
MIT License — for research purposes only (no investment advice).

## Citation
```
@article{fan2025ai,
  title={AI-Trader: Benchmarking Autonomous Agents in Real-Time Financial Markets},
  author={Fan, Tianyu et al.},
  journal={arXiv preprint arXiv:2512.10971},
  year={2025}
}
```

### Key Simplifications
- Removed redundant market support (A-shares/crypto) — focus only on NASDAQ 100 hourly trading
- Streamlined install/run steps (no complex scripts)
- Explicit prompt modification section (your core change)
- Clear metrics comparison (original vs modified prompt)
-